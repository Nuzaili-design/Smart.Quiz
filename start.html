<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
    <title>Science Quiz</title>
    <style>
        body {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            font-family: 'Poppins', sans-serif;
        }

        .quiz-container {
            background-color: rgb(255, 255, 255);
            color: #333;
            padding: 30px;
            margin: auto;
            margin-top: 50px;
            box-shadow: 0px 0px 10px rgb(0, 0, 0);
            max-width: 600px;
            border-radius: 10px;
        }

        .question {
            margin-bottom: 20px;
        }

        .btn-submit {
            margin-top: 20px;
        }

        .alert {
            display: none;
        }

        #timer {
            font-weight: bold;
            margin-bottom: 20px;
        }

        textarea {
            resize: none;
        }

        .btn-dark:hover {
            background-color: #555;
            border-color: #555;
        }
    </style>
</head>

<body>

<div class="container quiz-container">
    <h2 class="text-center">Science Quiz Questions</h2>
    <div id="timer" class="text-center">Time Remaining: 2:00</div> <!-- Timer Display -->
    <form id="quizForm">

        
        <!-- Quiz Questions -->
        <div class="question mb-3">
            <label>Question 1: How many rings are on the Olympic flag?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question1" value="5" required>
                <label class="form-check-label">5</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question1" value="6">
                <label class="form-check-label">6</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question1" value="5">
                <label class="form-check-label">7</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 2: What is a common application of mechatronics?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question2" value="Mining resources" required>
                <label class="form-check-label">Mining resources</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question2" value="Building bridges">
                <label class="form-check-label">Building bridges</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question2" value="Designing robots">
                <label class="form-check-label">Designing robots</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 3: What is the main purpose of an operating system?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question3" value="To compile code" required>
                <label class="form-check-label">To compile code</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question3" value="To manage hardware and software resources">
                <label class="form-check-label">To manage hardware and software resources</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question3" value="To create websites">
                <label class="form-check-label">To create websites</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 4: In what year was Okan University established?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question4" value="1996" required>
                <label class="form-check-label">1996</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question4" value="1999">
                <label class="form-check-label">1999</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question4" value="2000">
                <label class="form-check-label">2000</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 5: Who wrote "The Republic"?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question5" value="Aristotle" required>
                <label class="form-check-label">Aristotle</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question5" value="Plato">
                <label class="form-check-label">Plato</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question5" value="Socrates">
                <label class="form-check-label">Socrates</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 6: In Which semester is the Logic Circuit Design course offered?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question6" value="1" required>
                <label class="form-check-label">1</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question6" value="2">
                <label class="form-check-label">2</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question6" value="3">
                <label class="form-check-label">3</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 7: Transport Phenomena Course is available in the department of ..</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question7" value="Industrial Engineering" required>
                <label class="form-check-label">Industrial Engineering</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question7" value="Food Engineering">
                <label class="form-check-label">Food Engineering</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question7" value="Automotive Engineering">
                <label class="form-check-label">Automotive Engineering</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 8: In Which University did dr.Didem study for her bachelor's degree?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question8" value="Boğaziçi Üniversitesi" required>
                <label class="form-check-label">Boğaziçi Üniversitesi</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question8" value="University of Surrey">
                <label class="form-check-label">University of Surrey</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question8" value="University of Washington">
                <label class="form-check-label">University of Washington</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 9: In what year was dr.Semih Bilgen assigned Dean of the Faculty of Engineering</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question9" value="2016" required>
                <label class="form-check-label">2016</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question9" value="2017">
                <label class="form-check-label">2017</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question9" value="2018">
                <label class="form-check-label">2018</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 10: Who is the oldest doctor?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question10" value="Semih Bilgen" required>
                <label class="form-check-label">Semih Bilgen</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question10" value="Ihsan GOK">
                <label class="form-check-label">Ihsan GOK</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question10" value="Ramazan Nejat Tuncay">
                <label class="form-check-label">Ramazan Nejat Tuncay</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <!-- More Questions... -->

        <!-- User Information Form  -->

        <div class="mb-3">
            <label for="userName" class="form-label">Name:</label>
            <input type="text" class="form-control" id="userName" name="Name" required>
        </div>
        <div class="mb-3">
            <label for="userEmail" class="form-label">Email:</label>
            <input type="email" class="form-control" id="userEmail" name="Email" required>
        </div>
        <div class="mb-3">
            <label for="quizScore" class="form-label">Quiz score will be shown as soon as you click submit:</label>
            <textarea class="form-control" id="quizScore" name="Message" rows="2" readonly></textarea>
        </div>

        <button type="submit" class="btn btn-dark btn-submit">Submit Quiz</button>
    </form>
    <span id="msg"></span>
</div>

<script>

    // Timer Functionality
    const totalTime = 2 * 60; // 2 minutes in seconds

    let timeLeft = totalTime;

    function updateTimer() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('timer').textContent = `Time Remaining: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        timeLeft--;

        if (timeLeft < 0) {
            clearInterval(timerInterval);
            alert("Time's up!");
            submitQuiz();
        }
    }

    const timerInterval = setInterval(updateTimer, 1000);


    // Form Validation and Submission
    document.getElementById("quizForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent the default form submission

        let valid = true;
        const questions = document.querySelectorAll(".question");

        // Validate if each question is answered
        questions.forEach((question) => {
            const alert = question.querySelector(".alert");
            const options = question.querySelectorAll("input[type='radio']");
            let answered = false;
            options.forEach(option => {
                if (option.checked) {
                    answered = true;
                }
            });
            if (!answered) {
                valid = false;
                alert.style.display = "block";
            } else {
                alert.style.display = "none";
            }
        });

        if (valid) {
            submitQuiz();
        } else {
            alert("Please answer all questions before submitting.");
        }
    });

    function submitQuiz() {
        // Calculate score
        let score = 0;
        const correctAnswers = {
            question1: "5",
            question2: "Designing robots",
            question3: "To manage hardware and software resources",
            question4: "1999",
            question5: "Plato",
            question6: "2",
            question7: "Food Engineering",
            question8: "Boğaziçi Üniversitesi",
            question9: "2016",
            question10: "Ihsan GOK"
        };

        // Check answers and calculate score
        for (let i = 1; i <= 10; i++) {
            const questionName = `question${i}`;
            if (document.querySelector(`input[name="${questionName}"]:checked`) &&
                document.querySelector(`input[name="${questionName}"]:checked`).value === correctAnswers[questionName]) {
                score++;
            }
        }

        // Get current date and time
        const currentDate = new Date();
        const submissionTime = currentDate.toLocaleString(); // Format: 'MM/DD/YYYY, HH:MM:SS AM/PM'

        // Store the score and time in localStorage (optional)
        localStorage.setItem("quizScore", score);
        localStorage.setItem("submissionTime", submissionTime);

        // Display score and time in the readonly textarea
        document.getElementById('quizScore').value = `Your quiz score is: ${score}/10. Submitted at: ${submissionTime}`;

        // Submit the form data to Google Sheets
        const form = document.forms['quizForm'];
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzSLWMP4KpbxlzdMRiIqQ8TmDbmrPP3bvRhvplwiEDAR6Baw9vCIe9bKHEzjxhKwT9_cQ/exec';
        const msg = document.getElementById("msg");

        // Add submission time to the form data
        const formData = new FormData(form);
        formData.append('SubmissionTime', submissionTime);

        fetch(scriptURL, { method: 'POST', body: formData })
            .then(response => {
                msg.innerHTML = "Quiz submitted successfully!";
                setTimeout(function () {
                    msg.innerHTML = "";
                    form.reset();
                    clearInterval(timerInterval); // Stop the timer after submission
                    // Redirect to the goodbye page (result.html)
                    window.location.href = "result.html";
                }, 3000);
            })
            .catch(error => console.error('Error!', error.message));
    }
    
</script>

</body>
</html>
